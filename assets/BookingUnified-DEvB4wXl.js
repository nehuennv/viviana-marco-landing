import{j as o,B as G,q as e,y as A,t as n,M,A as T,D as V,x as F,E as q,L,C as W,F as _,G as P,H,z as Y,S as E}from"./index-CPAtYTCb.js";import{C as J}from"./calendar-C5P5gprG.js";const O=r=>r.toString().toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").trim(),K=(r,c)=>{if(!c)return!0;const d=O(r);return O(c).split(/\s+/).filter(i=>i.length>0).every(i=>{if(d.includes(i))return!0;if(i.length>4&&i.endsWith("s")){const u=i.slice(0,-1);if(d.includes(u))return!0}return!1})},f={"Estética Facial":{icon:e.jsx(E,{size:16}),color:"text-purple-600",activeClass:"bg-purple-600 text-white shadow-purple-200"},"Ortodoncia & Aparatología":{icon:e.jsx(Y,{size:16}),color:"text-blue-600",activeClass:"bg-blue-600 text-white shadow-blue-200"},"Consultas & Obras Sociales":{icon:e.jsx(H,{size:16}),color:"text-emerald-600",activeClass:"bg-emerald-600 text-white shadow-emerald-200"},"Procedimientos Clínicos":{icon:e.jsx(P,{size:16}),color:"text-slate-600",activeClass:"bg-slate-700 text-white shadow-slate-200"},Otros:{icon:e.jsx(_,{size:16}),color:"text-gray-500",activeClass:"bg-gray-600 text-white shadow-gray-200"}},Q=["Todos","Estética Facial","Ortodoncia & Aparatología","Procedimientos Clínicos","Consultas & Obras Sociales","Otros"],X="https://cal.com/nehuen-5wgahb",Z=({activeTab:r,setActiveTab:c})=>{const d=[{id:"whatsapp",label:"Asistente IA",icon:e.jsx(E,{size:16})},{id:"calendar",label:"Calendario",icon:e.jsx(J,{size:16})}];return e.jsx("div",{className:"inline-flex bg-white/50 backdrop-blur-md p-1.5 rounded-full border border-slate-200 shadow-sm relative",children:d.map(l=>{const x=r===l.id;return e.jsxs("button",{onClick:()=>c(l.id),className:`
              relative z-10 flex items-center gap-2 px-6 md:px-8 py-3 rounded-full text-sm font-semibold transition-colors duration-200
              ${x?"text-white":"text-slate-500 hover:text-violet-600"}
            `,children:[x&&e.jsx(n.div,{layoutId:"active-pill-booking",className:"absolute inset-0 bg-violet-600 rounded-full shadow-md z-10",transition:{type:"spring",stiffness:300,damping:30}}),e.jsxs("span",{className:"relative z-20 flex items-center gap-2",children:[l.icon," ",l.label]})]},l.id)})})},se=({initialTreatment:r})=>{const[c,d]=o.useState("whatsapp"),{treatmentsData:l,loading:x}=G(),[i,u]=o.useState(""),[p,j]=o.useState("Todos"),[h,w]=o.useState("grid"),[y,N]=o.useState(null),[C,z]=o.useState(!1),[m,S]=o.useState({nombre:"",apellido:"",tratamiento:""});o.useEffect(()=>{r&&(S(t=>({...t,tratamiento:r})),d("whatsapp"))},[r]);const k=o.useMemo(()=>{if(x)return[];let t=l.filter(s=>K(s.title,i)&&s.active);return p!=="Todos"&&(t=t.filter(s=>(s.category||"Otros")===p)),t},[l,i,p,x]),$=o.useMemo(()=>{const t=l.filter(a=>a.active),s=new Set(t.map(a=>a.category||"Otros"));return Q.filter(a=>a==="Todos"||s.has(a))},[l]),D=t=>{const s=t.target.value;u(s),s.length>0&&p!=="Todos"&&j("Todos")},I=t=>{z(!1),N(`${X}/${t}?embed=true&theme=light`),w("iframe")},R=()=>{w("grid"),N(null)},B=t=>{t.preventDefault();const s="5492995977208",a=`Hola Dra, soy ${m.nombre} ${m.apellido}. Me gustaría agendar un turno para: *${m.tratamiento||"Consulta General"}*.`,b=`https://wa.me/${s}?text=${encodeURIComponent(a)}`;window.open(b,"_blank")},g=t=>{const{name:s,value:a}=t.target;S(b=>({...b,[s]:a}))},U={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1}}},v={hidden:{opacity:0,y:10},visible:{opacity:1,y:0}};return e.jsx("section",{id:"booking",className:"relative py-12 md:pt-24 md:pb-20 z-10 overflow-visible",children:e.jsxs("div",{className:"max-w-6xl mx-auto px-6",children:[e.jsxs("div",{className:"text-center mb-12 space-y-6",children:[e.jsxs("div",{"data-aos":"zoom-in","data-aos-duration":"1000",children:[e.jsxs("h2",{className:"text-4xl md:text-5xl font-bold text-slate-800 mb-4 tracking-tight",children:["Agenda tu ",e.jsx("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-primary to-purple-400",children:"experiencia."})]}),e.jsx("p",{className:"text-slate-500 text-[15px] md:text-lg font-light max-w-2xl mx-auto leading-7",children:"Tecnología y calidez humana. Elegí el canal que prefieras."})]}),e.jsx("div",{className:"flex justify-center","data-aos":"zoom-in","data-aos-delay":"200",children:e.jsx(Z,{activeTab:c,setActiveTab:d})})]}),e.jsx("div",{className:"min-h-[600px] relative","data-aos":"zoom-in-up","data-aos-duration":"800","data-aos-delay":"300",children:e.jsxs(A,{mode:"wait",children:[c==="whatsapp"&&e.jsx(n.div,{initial:{opacity:0,y:20,scale:.98},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-20,scale:.98},transition:{duration:.4},className:"max-w-xl mx-auto",children:e.jsxs("div",{className:"relative bg-white/60 backdrop-blur-md border border-slate-200 p-8 md:p-12 rounded-[2.5rem] shadow-2xl shadow-violet-900/5 transition-all duration-500",children:[e.jsxs("div",{className:"flex items-center gap-5 mb-8",children:[e.jsxs("div",{className:"relative group",children:[e.jsx("div",{className:"absolute inset-0 bg-violet-400 rounded-2xl blur-md opacity-20 animate-pulse group-hover:opacity-40 transition-opacity duration-500"}),e.jsx("div",{className:"relative w-16 h-16 bg-violet-100/80 rounded-2xl flex items-center justify-center text-violet-600 border border-violet-200 shadow-inner group-hover:scale-105 transition-transform duration-300",children:e.jsx(M,{size:28,strokeWidth:2.5,className:"drop-shadow-sm"})})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold text-slate-800 leading-tight",children:"Asistente Virtual"}),e.jsx("p",{className:"text-slate-500 text-sm font-medium flex items-center gap-1.5",children:"En línea ahora"})]})]}),e.jsxs(n.form,{variants:U,initial:"hidden",animate:"visible",onSubmit:B,className:"space-y-6",children:[e.jsxs(n.div,{variants:v,className:"space-y-2",children:[e.jsx("label",{className:"text-xs font-bold text-slate-400 uppercase tracking-widest ml-1",children:"Tus Datos"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx("input",{type:"text",placeholder:"Nombre",name:"nombre",required:!0,value:m.nombre,onChange:g,className:"w-full h-12 rounded-xl px-4 bg-white border border-slate-200 text-slate-700 outline-none focus:border-violet-500 focus:ring-2 focus:ring-violet-500/10 transition-all shadow-sm placeholder:text-slate-400"}),e.jsx("input",{type:"text",placeholder:"Apellido",name:"apellido",required:!0,value:m.apellido,onChange:g,className:"w-full h-12 rounded-xl px-4 bg-white border border-slate-200 text-slate-700 outline-none focus:border-violet-500 focus:ring-2 focus:ring-violet-500/10 transition-all shadow-sm placeholder:text-slate-400"})]})]}),e.jsxs(n.div,{variants:v,className:"space-y-2",children:[e.jsx("label",{className:"text-xs font-bold text-slate-400 uppercase tracking-widest ml-1",children:"Tratamiento de Interés"}),e.jsxs("div",{className:"relative",children:[e.jsxs("select",{name:"tratamiento",value:m.tratamiento,onChange:g,className:"w-full h-12 bg-white border border-slate-200 rounded-xl px-4 text-base font-medium text-slate-700 outline-none focus:border-violet-500 focus:ring-2 focus:ring-violet-500/10 transition-all shadow-sm appearance-none cursor-pointer",children:[e.jsx("option",{value:"",disabled:!0,children:"Seleccioná el tratamiento..."}),e.jsx("option",{value:"Consulta General",children:"Consulta General"}),l.length>0&&e.jsx("optgroup",{label:"Disponibles",children:l.filter(t=>t.active).map(t=>e.jsx("option",{value:t.title,children:t.title},t.slug))})]}),e.jsx("div",{className:"absolute right-4 top-1/2 -translate-y-1/2 pointer-events-none text-slate-400",children:e.jsx("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round",children:e.jsx("path",{d:"m6 9 6 6 6-6"})})})]})]}),e.jsx(n.div,{variants:v,children:e.jsxs("button",{type:"submit",className:"w-full py-4 mt-4 rounded-full bg-violet-600 hover:bg-violet-700 text-white font-semibold text-lg shadow-lg shadow-violet-500/20 transition-all duration-300 flex items-center justify-center gap-2 group active:scale-[0.98]",children:[e.jsx("span",{children:"Continuar en WhatsApp"}),e.jsx(T,{size:18,className:"group-hover:translate-x-1 transition-transform"})]})})]})]})},"whatsapp"),c==="calendar"&&e.jsx(n.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},transition:{duration:.4},className:"w-full max-w-5xl mx-auto",children:e.jsxs("div",{className:"bg-white rounded-[2.5rem] shadow-2xl shadow-violet-900/5 border border-slate-200 overflow-hidden min-h-[750px] flex flex-col relative",children:[e.jsxs("div",{className:"px-6 py-4 border-b border-slate-100 flex items-center justify-between bg-white/90 backdrop-blur sticky top-0 z-20",children:[h==="iframe"?e.jsxs("button",{onClick:R,className:"flex items-center gap-2 text-slate-500 hover:text-violet-600 transition-colors group px-2 py-1 rounded-lg hover:bg-slate-50",children:[e.jsx(V,{size:18}),e.jsx("span",{className:"text-sm font-bold",children:"Volver a tratamientos"})]}):e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"w-2 h-2 rounded-full bg-violet-500 animate-pulse"}),e.jsx("span",{className:"text-sm font-bold text-slate-700",children:"Seleccioná tu tratamiento"})]}),e.jsxs("div",{className:"hidden sm:flex items-center gap-2 text-xs font-bold text-emerald-600 bg-emerald-50 px-3 py-1 rounded-full border border-emerald-100",children:[e.jsx(F,{size:14})," ",e.jsx("span",{children:"TURNOS VERIFICADOS"})]})]}),e.jsx("div",{className:"flex-grow relative bg-slate-50/50",children:e.jsxs(A,{mode:"wait",children:[h==="grid"&&e.jsxs(n.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2},className:"absolute inset-0 flex flex-col",children:[e.jsxs("div",{className:"p-6 pb-2 space-y-5 bg-white/50 backdrop-blur-sm z-10",children:[e.jsx("div",{className:"relative group max-w-lg mx-auto",children:e.jsxs("div",{className:"relative flex items-center bg-white rounded-xl border border-slate-200 shadow-sm group-hover:border-violet-300 transition-all focus-within:ring-2 focus-within:ring-violet-100",children:[e.jsx(q,{className:"ml-4 text-slate-400 group-focus-within:text-violet-500 transition-colors",size:18}),e.jsx("input",{type:"text",placeholder:"Buscar (ej: Botox, Limpieza...)",value:i,onChange:D,className:"w-full h-12 bg-transparent border-none outline-none text-slate-700 placeholder:text-slate-400 px-3 text-sm font-medium"})]})}),e.jsx("div",{className:"flex flex-wrap justify-center gap-2",children:$.map(t=>{const s=p===t,a=f[t]||f.Otros;return e.jsxs("button",{onClick:()=>{j(t),u("")},className:`
                                                         px-3 py-1.5 rounded-full text-xs font-bold transition-all duration-200 border flex items-center gap-1.5
                                                         ${s?a.activeClass+" shadow-md scale-105":"bg-white text-slate-500 border-slate-200 hover:border-slate-300 hover:bg-slate-50"}
                                                      `,children:[t!=="Todos"&&e.jsx("span",{className:s?"text-white":a.color,children:a.icon}),t]},t)})})]}),e.jsx("div",{className:"flex-grow overflow-y-auto px-6 pb-8 custom-scrollbar",children:x?e.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-slate-400",children:[e.jsx(L,{className:"animate-spin mb-2 text-violet-500",size:32}),e.jsx("p",{className:"text-xs font-medium",children:"Cargando..."})]}):e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 pt-2",children:[k.map(t=>e.jsxs("button",{onClick:()=>I(t.slug),className:"group bg-white p-5 rounded-2xl border border-slate-200 hover:border-violet-300 shadow-sm hover:shadow-xl hover:shadow-violet-500/10 transition-all duration-300 text-left flex flex-col h-full relative overflow-hidden",children:[e.jsx("div",{className:"mb-3 relative z-10",children:e.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 rounded-md bg-slate-50 text-[10px] font-bold uppercase text-slate-400 border border-slate-100 group-hover:text-violet-600 group-hover:bg-violet-50 transition-colors",children:[f[t.category]?.icon," ",t.category]})}),e.jsxs("div",{className:"flex-grow relative z-10",children:[e.jsx("h4",{className:"text-[15px] font-bold text-slate-700 group-hover:text-violet-700 transition-colors mb-1 leading-snug",children:t.title}),e.jsxs("div",{className:"flex items-center gap-1 text-[11px] text-slate-400 font-medium",children:[e.jsx(W,{size:10})," ",t.duration]})]}),e.jsxs("div",{className:"mt-4 pt-3 border-t border-slate-50 flex items-center justify-between w-full relative z-10",children:[e.jsx("span",{className:"text-sm font-bold text-emerald-600 bg-emerald-50 px-2 py-0.5 rounded border border-emerald-100",children:`$${Number(t.price).toLocaleString("es-AR")}`}),e.jsx(T,{size:16,className:"text-slate-300 group-hover:text-violet-600 transition-colors -rotate-45 group-hover:rotate-0 transform duration-300"})]}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-transparent to-violet-50/30 opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none"})]},t.slug)),k.length===0&&e.jsx("div",{className:"col-span-full text-center py-10 text-slate-400 text-sm",children:"No encontramos tratamientos."})]})})]},"grid"),h==="iframe"&&e.jsxs(n.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:20},transition:{duration:.3},className:"absolute inset-0 bg-white flex flex-col",children:[!C&&e.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center bg-slate-50 z-0",children:[e.jsx(L,{className:"animate-spin text-violet-500 mb-3",size:32}),e.jsx("p",{className:"text-xs text-slate-400 font-medium animate-pulse",children:"Conectando con la agenda..."})]}),y&&e.jsx("iframe",{src:y,className:`w-full h-full border-none relative z-10 transition-opacity duration-500 ${C?"opacity-100":"opacity-0"}`,onLoad:()=>z(!0),allow:"camera; microphone; autoplay; fullscreen"})]},"iframe")]})})]})},"calendar")]})})]})})};export{se as default};
